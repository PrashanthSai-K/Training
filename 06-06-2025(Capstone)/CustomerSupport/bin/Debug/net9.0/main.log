2025-06-12 15:28:53,510 [1] FATAL Microsoft.AspNetCore.Hosting.Diagnostics - Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.UseWhenExtensions.<>c__DisplayClass0_0.<UseWhen>b__0(RequestDelegate main)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-06-12 15:28:53,547 [1] ERROR Microsoft.Extensions.Hosting.Internal.Host - Hosting failed to start
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.UseWhenExtensions.<>c__DisplayClass0_0.<UseWhen>b__0(RequestDelegate main)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-06-12 15:29:19,493 [1] FATAL Microsoft.AspNetCore.Hosting.Diagnostics - Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.UseWhenExtensions.<>c__DisplayClass0_0.<UseWhen>b__0(RequestDelegate main)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-06-12 15:29:19,531 [1] ERROR Microsoft.Extensions.Hosting.Internal.Host - Hosting failed to start
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.UseWhenExtensions.<>c__DisplayClass0_0.<UseWhen>b__0(RequestDelegate main)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-06-12 15:29:49,914 [1] FATAL Microsoft.AspNetCore.Hosting.Diagnostics - Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.UseWhenExtensions.<>c__DisplayClass0_0.<UseWhen>b__0(RequestDelegate main)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-06-12 15:29:49,956 [1] ERROR Microsoft.Extensions.Hosting.Internal.Host - Hosting failed to start
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.UseWhenExtensions.<>c__DisplayClass0_0.<UseWhen>b__0(RequestDelegate main)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-06-12 15:31:05,717 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5124
2025-06-12 15:31:05,751 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-12 15:31:05,751 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-12 15:31:05,752 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/sai/Training/06-06-2025(Capstone)/CustomerSupport
2025-06-12 15:32:50,586 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."AgentId", c."CreatedOn", c."CustomerId", c."Status"
FROM "Chats" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-06-12 15:32:50,704 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__username_0='?'], CommandType='Text', CommandTimeout='30']
SELECT u."Username", u."Password", u."RefreshToken", u."Roles"
FROM "Users" AS u
WHERE u."Username" = @__username_0
LIMIT 1
2025-06-12 15:32:50,888 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@__chatId_0='?' (DbType = Int32), @__email_1='?'], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Chats" AS c
    INNER JOIN "Agents" AS a ON c."AgentId" = a."Id"
    INNER JOIN "Customers" AS c0 ON c."CustomerId" = c0."Id"
    WHERE c."Id" = @__chatId_0 AND (a."Email" = @__email_1 OR c0."Email" = @__email_1))
2025-06-12 15:32:51,150 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatMessages" ("ChatId", "CreatedAt", "ImageName", "Message", "MessageType", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-06-12 15:33:08,682 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-12 15:34:02,840 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5124
2025-06-12 15:34:02,880 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-12 15:34:02,880 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-12 15:34:02,880 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/sai/Training/06-06-2025(Capstone)/CustomerSupport
2025-06-12 15:34:11,906 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (62ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."AgentId", c."CreatedOn", c."CustomerId", c."Status"
FROM "Chats" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-06-12 15:34:12,031 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__username_0='?'], CommandType='Text', CommandTimeout='30']
SELECT u."Username", u."Password", u."RefreshToken", u."Roles"
FROM "Users" AS u
WHERE u."Username" = @__username_0
LIMIT 1
2025-06-12 15:34:12,150 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__chatId_0='?' (DbType = Int32), @__email_1='?'], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Chats" AS c
    INNER JOIN "Agents" AS a ON c."AgentId" = a."Id"
    INNER JOIN "Customers" AS c0 ON c."CustomerId" = c0."Id"
    WHERE c."Id" = @__chatId_0 AND (a."Email" = @__email_1 OR c0."Email" = @__email_1))
2025-06-12 15:34:12,403 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatMessages" ("ChatId", "CreatedAt", "ImageName", "Message", "MessageType", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-06-12 15:36:08,056 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-12 15:36:16,317 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5124
2025-06-12 15:36:16,349 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-12 15:36:16,349 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-12 15:36:16,349 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/sai/Training/06-06-2025(Capstone)/CustomerSupport
2025-06-12 15:37:33,133 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-12 15:37:40,059 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5124
2025-06-12 15:37:40,089 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-12 15:37:40,089 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-12 15:37:40,089 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/sai/Training/06-06-2025(Capstone)/CustomerSupport
2025-06-12 15:38:16,904 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-12 15:38:27,030 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5124
2025-06-12 15:38:27,060 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-12 15:38:27,060 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-12 15:38:27,060 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/sai/Training/06-06-2025(Capstone)/CustomerSupport
2025-06-12 15:38:49,918 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (65ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."AgentId", c."CreatedOn", c."CustomerId", c."Status"
FROM "Chats" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-06-12 15:38:50,037 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@__username_0='?'], CommandType='Text', CommandTimeout='30']
SELECT u."Username", u."Password", u."RefreshToken", u."Roles"
FROM "Users" AS u
WHERE u."Username" = @__username_0
LIMIT 1
2025-06-12 15:38:50,157 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__chatId_0='?' (DbType = Int32), @__email_1='?'], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Chats" AS c
    INNER JOIN "Agents" AS a ON c."AgentId" = a."Id"
    INNER JOIN "Customers" AS c0 ON c."CustomerId" = c0."Id"
    WHERE c."Id" = @__chatId_0 AND (a."Email" = @__email_1 OR c0."Email" = @__email_1))
2025-06-12 15:38:50,414 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatMessages" ("ChatId", "CreatedAt", "ImageName", "Message", "MessageType", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-06-12 15:42:55,076 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-12 15:43:03,344 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5124
2025-06-12 15:43:03,377 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-12 15:43:03,378 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-12 15:43:03,378 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/sai/Training/06-06-2025(Capstone)/CustomerSupport
2025-06-12 15:43:15,661 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."AgentId", c."CreatedOn", c."CustomerId", c."Status"
FROM "Chats" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-06-12 15:43:15,777 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__username_0='?'], CommandType='Text', CommandTimeout='30']
SELECT u."Username", u."Password", u."RefreshToken", u."Roles"
FROM "Users" AS u
WHERE u."Username" = @__username_0
LIMIT 1
2025-06-12 15:43:15,965 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__chatId_0='?' (DbType = Int32), @__email_1='?'], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Chats" AS c
    INNER JOIN "Agents" AS a ON c."AgentId" = a."Id"
    INNER JOIN "Customers" AS c0 ON c."CustomerId" = c0."Id"
    WHERE c."Id" = @__chatId_0 AND (a."Email" = @__email_1 OR c0."Email" = @__email_1))
2025-06-12 15:43:16,246 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatMessages" ("ChatId", "CreatedAt", "ImageName", "Message", "MessageType", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-06-12 15:43:23,681 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."AgentId", c."CreatedOn", c."CustomerId", c."Status"
FROM "Chats" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-06-12 15:43:23,684 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='Text', CommandTimeout='30']
SELECT u."Username", u."Password", u."RefreshToken", u."Roles"
FROM "Users" AS u
WHERE u."Username" = @__username_0
LIMIT 1
2025-06-12 15:43:23,687 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__chatId_0='?' (DbType = Int32), @__email_1='?'], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Chats" AS c
    INNER JOIN "Agents" AS a ON c."AgentId" = a."Id"
    INNER JOIN "Customers" AS c0 ON c."CustomerId" = c0."Id"
    WHERE c."Id" = @__chatId_0 AND (a."Email" = @__email_1 OR c0."Email" = @__email_1))
2025-06-12 15:43:23,693 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatMessages" ("ChatId", "CreatedAt", "ImageName", "Message", "MessageType", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-06-12 15:43:37,748 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-12 15:43:46,111 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5124
2025-06-12 15:43:46,150 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-12 15:43:46,150 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-12 15:43:46,150 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/sai/Training/06-06-2025(Capstone)/CustomerSupport
2025-06-12 15:44:06,915 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (65ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."AgentId", c."CreatedOn", c."CustomerId", c."Status"
FROM "Chats" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-06-12 15:44:07,045 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__username_0='?'], CommandType='Text', CommandTimeout='30']
SELECT u."Username", u."Password", u."RefreshToken", u."Roles"
FROM "Users" AS u
WHERE u."Username" = @__username_0
LIMIT 1
2025-06-12 15:44:07,237 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__chatId_0='?' (DbType = Int32), @__email_1='?'], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Chats" AS c
    INNER JOIN "Agents" AS a ON c."AgentId" = a."Id"
    INNER JOIN "Customers" AS c0 ON c."CustomerId" = c0."Id"
    WHERE c."Id" = @__chatId_0 AND (a."Email" = @__email_1 OR c0."Email" = @__email_1))
2025-06-12 15:44:07,489 [.NET TP Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32), @p5='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatMessages" ("ChatId", "CreatedAt", "ImageName", "Message", "MessageType", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-06-12 15:51:20,423 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
