<div class="min-w-screen h-[92vh] grid grid-cols-1 sm:grid-cols-3 overflow-hidden">
    <div class="col-span-1 h-full border-r flex flex-col border-gray-300 min-h-0" *ngIf="authService.currentUser$ | async as user">
        User: {{user.username}},Role: {{user.role}}
        <div class="bg-white shadow-lg p-5 shrink-0">
            <div class="flex items-center justify-between">
                <h1 class="text-lg font-semibold">Chats</h1>
                <lucide-icon name="message-circle-plus" class="w-5 h-5 stroke-blue-600 cursor-pointer"></lucide-icon>
            </div>
            <div class="mt-2">
                <fieldset class="fieldset">
                    <input type="text" class="input w-full placeholder:text-sm placeholder:text-gray-400"
                        placeholder="Type to search..." />
                </fieldset>
            </div>
        </div>

        <div class="overflow-y-auto grow" (scroll)="onScroll($event)">
            <app-chat-list [scrolledBottom]="scrolledBottom$"></app-chat-list>
        </div>
    </div>

    <div class="col-span-2 pt-5 px-2.5">
        @if (!activeChat) {
        <div class="flex h-full w-full items-center justify-center">
            <p> Select chat to view messages</p>
        </div>
        }@else {
        <div class="w-full">
            <div class="bg-white shadow-lg shrink-0  border-gray-300 rounded-2xl p-5">
                <div class="flex items-center justify-between">
                    <div class="flex items-center justify-center gap-3 ">
                        <lucide-icon name="circle-user" class="w-10 h-10 fill-gray-50 stroke-blue-600"></lucide-icon>
                        <h1 class="text-lg font-semibold">{{activeChat.agent.name | titlecase}}</h1>
                    </div>
                    <lucide-icon name="message-circle-plus"
                        class="w-5 h-5 stroke-blue-600 cursor-pointer"></lucide-icon>
                </div>
            </div>
            <app-chat></app-chat>
        </div>
        }
    </div>
</div>